Code from https://docs.python.org/3.4/howto/sockets.html
